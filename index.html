<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Phone Parts Pro</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">


    <style>



/* تنسيق الدائرة العائمة */
.floating-new-btn {
    position: fixed;
    bottom: 50px; /* تقليل الارتفاع ليكون أقرب إلى الفوتر */
    left: 20px; /* الجهة اليمنى كما هي */
    width: 50px;
    height: 50px;
    background: linear-gradient(45deg, #43cea2, #185a9d);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-family: 'Cairo', sans-serif;
    font-size: 16px;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    z-index: 1000;
    user-select: none;
}

/* شارة عدد العناصر الجديدة */
.new-items-count {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #FF416C;
    color: #fff;
    font-size: 12px;
    font-weight: bold;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

/* تنسيق النافذة المنبثقة للعناصر الجديدة */
/* تنسيق النافذة المنبثقة للعناصر الجديدة */
#newItemsModal {
    position: fixed;
    top: 50px; /* أسفل الهيدر (40px + 10px مسافة) */
    bottom: 60px; /* أعلى الفوتر (~50px + 10px مسافة) */
    left: 50%;
    transform: translateX(-50%);
    width: calc(100% - 20px); /* عرض الواجهة مع 10px مسافة من اليمين واليسار */
    max-width: 800px; /* الحد الأقصى للعرض للشاشات الكبيرة */
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(30, 30, 30, 0.8));
    backdrop-filter: blur(15px);
    border-radius: 5px;
    padding: 25px;
    z-index: 10000;
    display: none;
    flex-direction: column;
    align-items: center;
}

#newItemsModal h2 {
    font-size: 28px;
    font-family: 'Cairo', sans-serif;
    color: #fff;
    background: linear-gradient(45deg, #43cea2, #185a9d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 25px;
    text-align: center;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
}

#newItemsModal .modal-content {
    width: 100%;
    height: 100%; /* شغل كل الارتفاع المتاح */
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* إخفاء مسطرة السكرول مع السماح بالتمرير */
#newItemsModal .modal-content::-webkit-scrollbar {
    display: none; /* إخفاء المسطرة على متصفحات Webkit (مثل Chrome وSafari) */
}

/* إخفاء المسطرة على متصفحات أخرى (مثل Firefox) */
#newItemsModal .modal-content {
    -ms-overflow-style: none; /* لـ Internet Explorer و Edge */
    scrollbar-width: none; /* لـ Firefox */
}

#newItemsModal .modal-content .new-item-card {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(0, 0, 0, 0.5));
    border-radius: 12px;
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    position: relative;
    border: 1px solid rgba(67, 206, 162, 0.3);
}

/* تنسيق الدائرة التي تحل محل الصورة */
#newItemsModal .modal-content .new-item-card .category-circle {
    width: 60px;
    height: 60px;
    background: linear-gradient(45deg, #8B0000, #B22222); /* أحمر غامق متدرج */
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none; /* إزالة الحدود الملونة */
    font-family: 'Cairo', sans-serif;
    font-size: 12px;
    font-weight: bold;
    color: #fff;
    text-align: center;
    line-height: 1.2;
    padding: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

#newItemsModal .modal-content .new-item-card .item-details {
    flex: 1;
    text-align: left;
    color: #fff;
    font-family: 'Cairo', sans-serif;
    position: relative;
    padding-top: 22px; /* زيادة الحشوة لخفض النص أكثر وتجنب التداخل */
    overflow-wrap: break-word; /* السماح بالتفاف النصوص الطويلة */
}

#newItemsModal .modal-content .new-item-card .item-details .new-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: linear-gradient(45deg, #8B0000, #B22222); /* أحمر غامق */
    color: #fff;
    font-size: 12px; /* حجم نص أكبر للوضوح */
    font-weight: bold;
    padding: 5px 10px; /* حشوة أكبر لمظهر أوضح */
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

#newItemsModal .modal-content .new-item-card .item-details h4 {
    font-size: 16px;
    margin: 0 0 6px 0;
    color: #fff;
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: normal; /* السماح بالانتقال إلى سطر جديد */
    overflow-wrap: break-word; /* التفاف النصوص الطويلة */
    max-width: 100%; /* ضمان عدم التجاوز */
}

#newItemsModal .modal-content .new-item-card .item-details h4 i {
    font-size: 14px;
    color: #43cea2;
}

#newItemsModal .modal-content .new-item-card .item-details p {
    font-size: 14px;
    margin: 0;
    color: #dcdcdc;
    background: linear-gradient(45deg, #4682B4, #20B2AA);
    padding: 4px 8px;
    border-radius: 6px;
    display: inline-block;
}


#newItemsModal .close-modal-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: linear-gradient(45deg, #FF416C, #FF4B2B);
    border: none;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

/* تأثيرات الدخول والخروج */
@keyframes slideDownModal {
    0% {
        transform: translate(-50%, -100%);
        opacity: 0;
    }
    100% {
        transform: translate(-50%, 0);
        opacity: 1;
    }
}

@keyframes slideUpModal {
    0% {
        transform: translate(-50%, 0);
        opacity: 1;
    }
    100% {
        transform: translate(-50%, -100%);
        opacity: 0;
    }
}



/* Media Queries للتوافق مع الشاشات الصغيرة */
@media (max-width: 480px) {
    #newItemsModal {
        top: 45px;
        bottom: 55px;
        width: calc(100% - 10px);
        padding: 15px;
        border-radius: 5; /* أو القيمة المطلوبة مثل 5px */
    }
    #newItemsModal h2 {
        font-size: 24px;
        margin-bottom: 15px;
    }
    #newItemsModal .modal-content .new-item-card {
        padding: 10px;
        gap: 10px;
    }
    #newItemsModal .modal-content .new-item-card .category-circle {
        width: 50px;
        height: 50px;
        font-size: 10px;
    }
    #newItemsModal .modal-content .new-item-card .item-details {
        padding-top: 18px; /* زيادة الحشوة لخفض النص وتجنب التداخل */
    }
    #newItemsModal .modal-content .new-item-card .item-details .new-badge {
        font-size: 10px; /* حجم نص أكبر للشاشات الصغيرة */
        padding: 4px 8px; /* حشوة أكبر للوضوح */
    }
    #newItemsModal .modal-content .new-item-card .item-details h4 {
        font-size: 14px;
        line-height: 1.4;
    }
    #newItemsModal .modal-content .new-item-card .item-details p {
        font-size: 12px;
        padding: 3px 6px;
    }
    #newItemsModal .close-modal-btn {
        width: 30px;
        height: 30px;
        font-size: 16px;
    }
}

/* Media Queries للشاشات المتوسطة (تابلت) */
@media (min-width: 481px) and (max-width: 768px) {
    #newItemsModal {
        top: 48px;
        bottom: 58px;
        width: calc(100% - 15px);
        padding: 20px;
        border-radius: 5; /* أو القيمة المطلوبة مثل 5px */
    }
    #newItemsModal h2 {
        font-size: 26px;
        margin-bottom: 20px;
    }
    #newItemsModal .modal-content .new-item-card {
        padding: 11px;
        gap: 11px;
    }
    #newItemsModal .modal-content .new-item-card .category-circle {
        width: 55px;
        height: 55px;
        font-size: 11px;
    }
    #newItemsModal .modal-content .new-item-card .item-details {
        padding-top: 19px; /* زيادة الحشوة لتجنب التداخل */
    }
    #newItemsModal .modal-content .new-item-card .item-details .new-badge {
        font-size: 11px; /* حجم وسطي */
        padding: 4px 9px;
    }
    #newItemsModal .modal-content .new-item-card .item-details h4 {
        font-size: 15px;
        line-height: 1.3;
    }
}


    /* تخصيص نافذة التفعيل */
/* تخصيص نافذة التفعيل */
.swal2-popup.activation-popup {
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(20px);
    border-radius: clamp(15px, 3vw, 25px);
    width: clamp(80%, 90vw, 90%);
    max-width: 600px;
    padding: clamp(20px, 5vw, 40px);
    box-shadow: 0 0 60px rgba(70, 130, 180, 0.8), 0 0 20px rgba(255, 255, 255, 0.3);
    font-family: 'Cairo', sans-serif !important;
    color: #fff;
    text-align: center;
    z-index: 10000 !important;
    position: relative;
    animation: glow 2s infinite alternate;
}

@keyframes glow {
    0% { box-shadow: 0 0 20px rgba(70, 130, 180, 0.6), 0 0 40px rgba(255, 255, 255, 0.2); }
    100% { box-shadow: 0 0 30px rgba(70, 130, 180, 1), 0 0 60px rgba(255, 255, 255, 0.4); }
}

.swal2-popup.activation-popup .swal2-title {
    font-size: clamp(24px, 6vw, 32px);
    font-weight: bold;
    color: #fff;
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.8);
    margin-bottom: clamp(10px, 3vw, 20px);
    background: linear-gradient(135deg, #43cea2, #185a9d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.swal2-popup.activation-popup .swal2-html-container {
    font-size: clamp(16px, 4vw, 20px);
    color: #dcdcdc;
    line-height: 1.6;
    margin: clamp(10px, 3vw, 20px) 0;
}

.swal2-popup.activation-popup .swal2-input {
    width: clamp(75%, 85vw, 85%);
    padding: clamp(10px, 3vw, 15px) clamp(15px, 4vw, 20px);
    font-size: clamp(14px, 4vw, 18px);
    color: #fff;
    background: rgba(255, 255, 255, 0.15);
    border: 2px solid rgba(255, 255, 255, 0.4);
    border-radius: clamp(8px, 2vw, 12px);
    box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.5);
    margin: clamp(10px, 3vw, 20px) auto;
    font-family: 'Cairo', sans-serif !important;
    transition: all 0.3s ease;
}

.swal2-popup.activation-popup .swal2-input:focus {
    border: 2px solid #43cea2;
    box-shadow: 0 0 12px #43cea2;
    background: rgba(255, 255, 255, 0.2);
}

.swal2-popup.activation-popup .swal2-confirm {
    background: linear-gradient(135deg, #43cea2, #185a9d);
    padding: clamp(8px, 2vw, 12px) clamp(20px, 5vw, 30px);
    font-size: clamp(14px, 4vw, 18px);
    border-radius: clamp(15px, 3vw, 25px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    transition: all 0.3s ease;
}

.swal2-popup.activation-popup .swal2-cancel {
    background: linear-gradient(135deg, #FF416C, #FF4B2B);
    padding: clamp(8px, 2vw, 12px) clamp(20px, 5vw, 30px);
    font-size: clamp(14px, 4vw, 18px);
    border-radius: clamp(15px, 3vw, 25px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    transition: all 0.3s ease;
}

.swal2-popup.activation-popup .swal2-confirm:hover,
.swal2-popup.activation-popup .swal2-cancel:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(255, 255, 255, 0.4);
}

.swal2-popup.activation-popup .swal2-confirm:active,
.swal2-popup.activation-popup .swal2-cancel:active {
    transform: scale(0.95);
    box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.6);
}

/* Media Queries للتوافق مع الأجهزة الصغيرة */
@media (max-width: 480px) {
    .swal2-popup.activation-popup {
        width: 95%;
        padding: 15px;
    }
    .swal2-popup.activation-popup .swal2-title {
        font-size: 20px;
    }
    .swal2-popup.activation-popup .swal2-html-container {
        font-size: 14px;
    }
    .swal2-popup.activation-popup .swal2-input {
        padding: 8px 12px;
        font-size: 14px;
    }
    .swal2-popup.activation-popup .swal2-confirm,
    .swal2-popup.activation-popup .swal2-cancel {
        padding: 8px 20px;
        font-size: 14px;
    }
}

/* Media Queries للأجهزة المتوسطة (تابلت) */
@media (min-width: 481px) and (max-width: 768px) {
    .swal2-popup.activation-popup {
        width: 90%;
        padding: 25px;
    }
    .swal2-popup.activation-popup .swal2-title {
        font-size: 26px;
    }
    .swal2-popup.activation-popup .swal2-html-container {
        font-size: 16px;
    }
    .swal2-popup.activation-popup .swal2-input {
        padding: 10px 15px;
        font-size: 16px;
    }
    .swal2-popup.activation-popup .swal2-confirm,
    .swal2-popup.activation-popup .swal2-cancel {
        padding: 10px 25px;
        font-size: 16px;
    }
}
    
     @keyframes shake {
    0%, 100% { transform: translate(0, 0); }
    25% { transform: translate(-4px, 4px) rotate(-3deg); }
    50% { transform: translate(4px, -4px) rotate(3deg); }
    75% { transform: translate(-4px, 4px) rotate(-3deg); }
}

@keyframes explode {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.6); opacity: 0.7; filter: blur(3px); }
    100% { transform: scale(2); opacity: 0; filter: blur(6px); }
}

@keyframes screenPop {
    0% { transform: scale(0) rotate(0deg); opacity: 0; box-shadow: none; }
    50% { transform: scale(1.1) rotate(360deg); opacity: 1; box-shadow: 0 0 20px rgba(70, 130, 180, 0.8), 0 0 40px rgba(70, 130, 180, 0.4); }
    100% { transform: scale(1) rotate(720deg); opacity: 1; box-shadow: 0 0 15px rgba(70, 130, 180, 0.6); }
}

@keyframes pulseGlow {
    0% { box-shadow: 0 0 15px rgba(70, 130, 180, 0.6); }
    50% { box-shadow: 0 0 25px rgba(70, 130, 180, 1), 0 0 40px rgba(70, 130, 180, 0.5); }
    100% { box-shadow: 0 0 15px rgba(70, 130, 180, 0.6); }
}

@keyframes textFadeIn {
    0% { opacity: 0; transform: translateY(10px); }
    100% { opacity: 1; transform: translateY(0); }
}

/* تعديل المسافات بين الشعار والهيدر وشريط الأخبار */
.notification-container {
    position: relative;
    width: 160px;
    height: 160px;
    margin: 0 auto 2px;
}



.notification {
    position: absolute;
    top: 0;
    left: 0;
    width: 160px; /* مطابقة حجم الشعار */
    height: 160px; /* مطابقة حجم الشعار */
    background: linear-gradient(45deg, #4682B4, #20B2AA);
    border: 3px solid #4682B4;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transform: scale(0);
    z-index: 2;
}

.notification.show {
    animation: screenPop 0.7s ease-out forwards, pulseGlow 1.5s infinite;
}

.notification-text {
    font-family: 'Tajawal', sans-serif;
    font-size: 18px; /* يمكنك زيادته إلى 20px إذا كان النص صغيرًا جدًا */
    font-weight: 700;
    color: #ffffff;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    padding: 10px;
    text-align: center;
    max-width: 140px; /* زيادة لتناسب الحجم الجديد */
    opacity: 0;
    letter-spacing: 1px;
}

.notification.show .notification-text {
    animation: textFadeIn 0.5s ease-out forwards;
    animation-delay: 0.7s;
}

.notification::before {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    background: linear-gradient(45deg, #4682B4, #20B2AA);
    filter: blur(10px);
    opacity: 0.7;
    z-index: -1;
    border-radius: 50%;
}

  

 @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-circle {
            width: 80px;
            height: 80px;
            border: 8px solid rgba(255, 255, 255, 0.2);
            border-top: 8px solid #43cea2;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
  

/* ✅ طبقة الـ Overlay مع تأثير شفافية */
#overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(10px);
    z-index: 9998;
    display: none;
    transition: opacity 0.3s ease-in-out;
}


@keyframes slideDown {
    0% {
        transform: translate(-50%, -100%);
        opacity: 0;
    }
    100% {
        transform: translate(-50%, -50%);
        opacity: 1;
    }
}

@keyframes slideUp {
    0% {
        transform: translate(-50%, -50%);
        opacity: 1;
    }
    100% {
        transform: translate(-50%, -120%);
        opacity: 0;
    }
}

#promoPopup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -100%);
    width: 90%;
    max-width: 450px;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(25px);
    padding: 30px;
    border-radius: 20px;
    text-align: center;
    color: white;
    box-shadow: 0 0 50px rgba(0, 255, 255, 0.7);
    display: none;
    flex-direction: column;
    justify-content: space-between;
    z-index: 9999;
}


#promoImage {
    width: 100%;
    max-width: 250px;
    border-radius: 15px;
    transition: transform 0.3s ease;
    cursor: pointer;
    overflow: hidden !important;
    clip-path: inset(0 0 0 0 round 15px) !important;
    object-fit: cover;
}

#promoImage:hover {
    transform: scale(1.05);
}

/* ✅ تحسين عنوان النافذة */
.popup-title {
    font-size: 26px;
    font-weight: bold;
    text-shadow: 0 0 30px rgba(255, 255, 255, 0.8);
    background: linear-gradient(135deg, #ffcc00, #ff0066);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* ✅ تحسين زر الإغلاق */
#closeBtn {
    padding: 12px 30px;
    font-size: 18px;
    font-weight: bold;
    color: white;
    background: linear-gradient(135deg, #ff0066, #ffcc00);
    border: none;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 0 30px rgba(255, 0, 255, 0.7);
    animation: pulseEffect 2s infinite alternate;
    margin-top: 15px;
    overflow: hidden !important; /* قص أي محتوى أو تأثير خارج الحدود */
    clip-path: inset(0 0 0 0 round 25px) !important; /* قص صارم يطابق border-radius */
    font-family: 'Cairo', sans-serif !important; /* تغيير الخط إلى كايرو */
}

#closeBtn:hover {
    transform: scale(1.1);
    background: linear-gradient(45deg, #43cea2, #185a9d);
}

#closeBtn:active {
    transform: scale(0.95);
    background: linear-gradient(45deg, #43cea2, #185a9d);
    box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.5) !important; /* ظل داخلي فقط */
    clip-path: inset(0 0 0 0 round 25px) !important; /* تأكيد القص الدائري عند الضغط */
}



        /* Reset and basics */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

     body {
    font-family: 'Tajawal', sans-serif;
    background: linear-gradient(135deg, #3A6073, #16222A);
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    min-height: 100vh;
    padding: 40px 0 50px 0; /* علوية 40px للهيدر، سفلية 50px للفوتر */
    margin: 0;
    background-size: 400% 400%;
    animation: gradientAnimation 10s ease infinite;
}
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        

     /* تعديل المسافات داخل container */
.container {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(0, 0, 0, 0.1));
    background-size: 400% 400%;
    animation: gradientAnimation 10s ease infinite;
    border-radius: 20px;
    padding: 20px 10px;
    text-align: center;
    width: 90%;
    max-width: 800px;
    margin: 10px auto 20px auto; /* زيادة المسافة السفلية إلى 30px */
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    display: flex;
    flex-direction: column;
    gap: 8px;
}


@media (max-width: 768px) {
   .container {
        width: 95%;
        padding: 16px 8px; /* تقليل padding-top إلى 16px للشاشات المتوسطة */
        margin: 8px auto;
    }
    .search-container {
        margin: 8px 0 16px 0; /* تقليل margin-bottom إلى 16px للشاشات المتوسطة */
    }
    
}
    .results-container {
        max-width: 95%; /* ضبط العرض */
        padding: 8px; /* تقليل الحشوة */
        gap: 10px; /* تقليل المسافة بين العناصر */
    }

    .result-card {
        padding: 10px; /* تقليل الحشوة الداخلية */
    }
}

/* شاشات صغيرة (أقل من 480px) */
@media (max-width: 480px) {
  
      .container {
        width: 100%;
        padding: 12px 6px; /* تقليل padding-top إلى 12px للشاشات الصغيرة */
        margin: 6px auto;
    }
    .notification-container {
        width: 140px;
        height: 140px;
    }
    .search-container {
        margin: 8px 0 12px 0; /* تقليل margin-bottom إلى 12px للشاشات الصغيرة */
    }
    
}
    .categories {
        grid-template-columns: 1fr; /* تحويل الأعمدة إلى صف واحد */
        gap: 5px; /* تقليل المسافة بين الأزرار */
    }

    .result-card img {
        width: 50px; /* تقليل حجم الصور */
        height: 50px;
    }

    .search-container input {
        padding: 10px 40px 10px 10px; /* تعديل الحشوة لتناسب الشاشات الصغيرة */
    }

    .search-container button {
        width: 35px; /* تقليل حجم زر البحث */
        height: 35px;
        font-size: 14px;
    }
}



/* الشعار (Logo) */


.logo-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 160px;
    height: 160px;
    border-radius: 50%;
    overflow: hidden !important; /* قص التأثيرات */
    box-shadow: 0 4px 10px rgba(255, 255, 255, 0.2);
    cursor: pointer;
    z-index: 1;
    opacity: 1;
    transition: transform 0.3s ease;
    clip-path: circle(80px at center) !important; /* قص دائري يطابق نصف القطر */
}

.logo-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
    border-radius: 50%;
}

.logo-container:active {
    transform: scale(0.95) !important;
    box-shadow: inset 0 8px 16px rgba(0, 0, 0, 0.5) !important; /* ظل داخلي فقط */
    clip-path: circle(80px at center) !important; /* قص صارم */
}

.logo-container img:active {
    transform: scale(1) !important; /* منع الصورة من التأثر */
}
        
h1 {
    font-size: 36px;
    margin-bottom: 5px;
    color: white;
    text-shadow: 0 4px 10px rgba(255, 255, 255, 0.4);
    margin-top: 5px; /* أضف هذه الخاصية لتحديد المسافة من الشعار */
}


/* تقليل المسافة بين أزرار الفئات (أسعار بنمط الكروب، عدد الصيانة، التوافقات) */
.categories {
    display: flex;
    flex-direction: column;
    gap: 8px; /* تقليل المسافة من 15px إلى 10px لتقريب الأزرار */
    align-items: center;
    width: 100%;
}
    .category-btn {
        position: relative;
        overflow: hidden;
        height: 40px; /* تقليل ارتفاع الزر 
        padding-top: 4px; /* رفع النص قليلاً للأعلى */*/
        padding: 8px 16px;
        border-radius: 25px;
        background: rgba(0, 0, 0, 0.3);
        color: white;
        line-height: 40px; /* نفس ارتفاع الزر لتوسيط النص عموديًا */
        font-size: 16px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
         gap: 10px; /* مسافة بين الأيقونة والنص */
         font-family: 'Cairo', sans-serif !important;
     
    }

    .category-btn:hover {
        transform: scale(1.1);
        background: linear-gradient(45deg, #43cea2, #185a9d);
    }

   .category-btn:active {
    transform: scale(0.95); /* تصغير خفيف بدون تمدد */
    background: linear-gradient(45deg, #43cea2, #185a9d);
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.3); /* ظل داخلي بدلًا من خارجي */
}

   .new-category-btn, 
.category-btn, 
.tools-btn {
    width: 85%; /* جعل العرض موحد */
    max-width: 250px; /* نفس عرض زر أسعار بنمط الكروب

    
}


    
    .new-category-btn {
            grid-column: span 2; /* يجعل الزر يمتد على عمودين */
            position: relative;
            overflow: hidden;
            height: 40px; /* تقليل ارتفاع الزر 
            padding-top: 20px; /* رفع النص قليلاً للأعلى */*/
            padding: 8px 16px;
            border-radius: 25px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            line-height: 40px; /* نفس ارتفاع الزر لتوسيط النص عموديًا */
            font-size: 16px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            text-align: center;
             gap: 10px; /* مسافة بين الأيقونة والنص */
             font-family: 'Cairo', sans-serif !important;
        }

        .new-category-btn:hover {
            transform: scale(1.1);
            background: linear-gradient(45deg, #43cea2, #185a9d);
        }

      .new-category-btn:active {
    transform: scale(0.95);
    background: linear-gradient(45deg, #43cea2, #185a9d);
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.3);
}
    
       .category-btn,
       .new-category-btn {
       display: flex;
       align-items: center;
       justify-content: center;
       margin-top: -2px; /* رفع النص قليلاً */
}



.slider-container {
    position: relative;
    width: 100%; /* ✅ نفس عرض شريط الأخبار */
    max-width: none; /* ✅ إزالة الحد الأقصى للعرض */
    overflow: hidden;
    background: rgba(255, 255, 255, 0.1);
    padding: 5px;
    border-radius: 15px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
     gap: 8px; /* تقليل المسافة بين الأزرار والسلايدر */
}

.slider {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: 5px;
    flex-grow: 1;
}

.slider::-webkit-scrollbar {
    display: none;
}



.category {
    flex: 0 0 auto;
    width: 70px; /* جعل العرض يساوي الارتفاع لتصبح دائرية */
    height: 70px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 50%; /* دائري بدلًا من بيضوي */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    padding: 6px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    position: relative;
    overflow: hidden !important; /* قص التأثيرات */
    clip-path: circle(35px at center) !important; /* قص دائري يطابق نصف القطر */
    font-weight: bold;
    color: white;
}

/* تأثير الأيقونة */
.category i {
    font-size: 24px;
    margin-bottom: 5px;
    transition: transform 0.3s ease;
}

/* تأثير الأيقونة عند التمرير */
.category:hover i {
    transform: rotate(10deg) scale(1.2);
}

/* النص داخل الزر */
.category span {
    font-size: 12px; /* تقليل حجم النص ليناسب الدائرة */
    white-space: nowrap;
    font-weight: bold;
}

/* تأثير عند التمرير */
.category:hover {
    transform: scale(1.1);
    background: linear-gradient(45deg, #43cea2, #185a9d);
    box-shadow: 0 4px 15px rgba(67, 206, 162, 0.5);
}

/* تأثير عند الضغط */
.category:active {
    transform: scale(0.95) !important;
    background: linear-gradient(45deg, #43cea2, #185a9d) !important;
    box-shadow: inset 0 6px 12px rgba(0, 0, 0, 0.7) !important; /* ظل داخلي فقط */
    clip-path: circle(35px at center) !important; /* قص دائري */
}

/* تأثير عند التحديد */
.category.active {
    background: linear-gradient(135deg, #004D40, #00796B);
    color: white;
    transform: scale(1.15);
    box-shadow: 0 6px 18px rgba(67, 206, 162, 0.7);
}



/* ✅ تأثير نبض عند التحديد */
@keyframes pulseEffect {
    0% { transform: scale(1.15); box-shadow: 0 0 10px rgba(67, 206, 162, 0.5); }
    50% { transform: scale(1.2); box-shadow: 0 0 20px rgba(67, 206, 162, 0.8); }
    100% { transform: scale(1.15); box-shadow: 0 0 10px rgba(67, 206, 162, 0.5); }
}







.slider-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(243, 156, 18, 0.4);
    border: none;
    color: white;
    padding: 8px;
    cursor: pointer;
    border-radius: 50%;
    font-size: 16px;
    width: 38px;
    height: 38px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
    z-index: 10;
    overflow: hidden !important; /* قص صارم */
    clip-path: circle(18px at center); /* دائرة أصغر قليلاً من نصف القطر (19px -> 18px) */
}

.slider-btn:hover {
    background: rgba(243, 156, 18, 0.8);
    transform: translateY(-50%) scale(1.2);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
}

.slider-btn:active {
    transform: translateY(-50%) scale(0.9) !important; /* تصغير قوي */
    background: rgba(243, 156, 18, 1) !important;
    box-shadow: none !important; /* إلغاء الظل الخارجي تمامًا */
    box-shadow: inset 0 6px 12px rgba(0, 0, 0, 0.7) !important; /* ظل داخلي قوي */
    clip-path: circle(18px at center) !important; /* قص دائري صارم */
}

.prev-btn {
    left: 5px;
}

.next-btn {
    right: 5px;
}


.search-container {
    position: relative;
    width: 100%;
    margin: 8px 0 20px 0; /* زيادة margin-bottom إلى 20px لتتساوى مع padding-top للـ container */
}

.search-container input {
    width: 100%;
    height: 40px; /* ارتفاع الشريط */
    padding: 8px 16px;
    font-size: 16px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: 25px;
    background: rgba(0, 0, 0, 0.3);
    color: white;
    outline: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

.search-container button {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: linear-gradient(45deg, #43cea2, #185a9d);
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    color: white;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden !important; /* قص التأثيرات */
    clip-path: circle(15px at center) !important; /* قص دائري يطابق نصف القطر */
}

.search-container button:hover {
    transform: translateY(-50%) scale(1.1);
}

.search-container button:active {
    transform: translateY(-50%) scale(0.95) !important;
    box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.5) !important; /* ظل داخلي فقط */
    clip-path: circle(15px at center) !important; /* قص صارم */
}




/* تنسيق زر المسح */
.search-container .clear-btn {
    position: absolute;
    right: 50px; /* وضعه بجانب زر البحث (10px لزر البحث + 30px عرضه + 10px مسافة) */
    top: 50%;
    transform: translateY(-50%);
    background: linear-gradient(45deg, #FF416C, #FF4B2B); /* لون مغاير لتمييزه، يمكنك استخدام نفس لون زر البحث */
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    color: white;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden !important;
    clip-path: circle(15px at center) !important; /* قص دائري مطابق لزر البحث */
}

.search-container .clear-btn:hover {
    transform: translateY(-50%) scale(1.1);
}

.search-container .clear-btn:active {
    transform: translateY(-50%) scale(0.95) !important;
    box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.5) !important;
    clip-path: circle(15px at center) !important;
}

/* تعديل padding حقل الإدخال لتجنب التداخل مع الأزرار */
.search-container input {
    padding-right: 90px; /* زيادة المسافة لاستيعاب زر المسح + زر البحث */
}

/* Media Queries للشاشات الصغيرة */
@media (max-width: 480px) {
    .search-container .clear-btn {
        right: 45px; /* تعديل الموقع */
        width: 35px; /* نفس حجم زر البحث */
        height: 35px;
        font-size: 14px;
    }
    .search-container input {
        padding-right: 85px; /* تعديل المسافة */
    }
}

/* Media Queries للشاشات المتوسطة */
@media (min-width: 481px) and (max-width: 768px) {
    .search-container .clear-btn {
        right: 48px;
        width: 32px;
        height: 32px;
        font-size: 15px;
    }
    .search-container input {
        padding-right: 88px;
    }
}







        /* تصميم الهيدر المستقيم */
/* تصميم الهيدر المستقيم */
.header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 40px; /* تغيير من 35px إلى 40px ليطابق الفوتر */
    background: rgba(0, 0, 0, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 12px;
    z-index: 2000;
}

/* نص مكتب عسل - في اليمين */
.header-title {
    font-family: 'Cairo', sans-serif;
    font-size: 18px;
    font-weight: 700;
    color: #A3BFFA; /* اللون الأصلي محتفظ به */
    text-shadow: 0 1px 2px rgba(163, 191, 250, 0.4);
    letter-spacing: 0.5px;
    order: 1; /* جعله في اليمين */
}

/* حاوية الأزرار - في اليسار */
.header-buttons {
    display: flex;
    gap: 6px;
    order: 0; /* جعل الأزرار في اليسار */
}

/* تصميم الأزرار */
.header-btn {
    padding: 3px 10px;
    border-radius: 8px;
    border: none;
    background: linear-gradient(135deg, #5A6388, #4A5275); /* لون افتراضي للأزرار */
    color: #fff;
    font-family: 'Cairo', sans-serif;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    overflow: hidden; /* قص التأثيرات الخارجة عن الحدود */
}

/* تأثيرات الضغط */
.header-btn:hover {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.5);
}

.header-btn:active {
    transform: scale(0.95);
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.3);
}

/* زر تحديث */
.header-btn.refresh-btn {
    background: linear-gradient(135deg, #6B7280, #4B5563);
}

.header-btn.refresh-btn:hover {
    background: linear-gradient(135deg, #9CA3AF, #6B7280);
}

/* زر خروج - أحمر غامق */
.header-btn.exit-btn {
    background: linear-gradient(135deg, #8B0000, #B22222); /* أحمر غامق */
}

.header-btn.exit-btn:hover {
    background: linear-gradient(135deg, #CD5C5C, #8B0000); /* تفتيح عند التمرير */
}
        
        
.results {
    display: none;
    flex-direction: column;
    gap: 20px;
    margin-top: 10px;
    padding: 15px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    width: 100%;
    transform: translateZ(0); /* تسريع عتادي */
    will-change: display; /* تحسين تغيير الـ display */
}


.no-results {
    color: #ffffff;
    background: rgba(255, 255, 255, 0.1);
    padding: 10px 15px;
    border-radius: 10px;
    text-align: center;
    font-size: 16px;
    font-weight: 500;
    margin-top: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
    width: 80%;
    margin-left: auto;
    margin-right: auto;
    animation: fadeIn 0.3s ease-in-out;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    overflow: hidden !important; /* قص التأثيرات */
    clip-path: inset(0 0 0 0 round 10px) !important; /* قص يطابق border-radius */
}

.no-results:active {
    transform: scale(0.95) !important;
    box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.5) !important; /* ظل داخلي فقط */
    background: rgba(255, 255, 255, 0.2) !important;
    clip-path: inset(0 0 0 0 round 10px) !important; /* قص صارم */
}


.result-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.5), rgba(50, 50, 50, 0.3));
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4), 0 0 10px rgba(255, 255, 255, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
    cursor: pointer;
    width: 90%;
    max-width: 450px;
    min-width: 250px;
    margin: 0 auto;
    position: relative;
    overflow: hidden !important; /* قص التأثيرات */
    clip-path: inset(0 0 0 0 round 15px) !important; /* قص يطابق border-radius */
    min-height: 200px;
}

.result-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 0 15px rgba(70, 130, 180, 0.5);
    background: linear-gradient(135deg, rgba(20, 20, 20, 0.6), rgba(70, 130, 180, 0.2));
}

.result-card:active {
    transform: scale(0.97) !important;
    box-shadow: inset 0 6px 12px rgba(0, 0, 0, 0.6) !important; /* ظل داخلي فقط */
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(50, 50, 50, 0.4)) !important;
    clip-path: inset(0 0 0 0 round 15px) !important; /* قص صارم عند الضغط */
}

.result-card img {
    width: clamp(80px, 20vw, 140px); /* زيادة حجم الصورة */
    height: clamp(80px, 20vw, 140px);
    border-radius: 50%;
    margin-bottom: 20px; /* زيادة المسافة تحت الصورة */
    object-fit: cover;
    border: 2px solid rgba(255, 255, 255, 0.2);
    transition: transform 0.3s ease;
}

.result-card:hover img {
    transform: rotate(10deg) scale(1.1);
}

.result-card h4 {
    font-size: clamp(18px, 5vw, 24px); /* زيادة حجم النص */
    font-weight: bold;
    color: white;
    margin: 0 0 20px 0; /* زيادة المسافة تحت الاسم */
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
    text-align: center;
    white-space: normal;
    word-wrap: break-word;
    max-width: 90%;
}

.result-card p {
    font-size: clamp(16px, 4.5vw, 22px); /* زيادة حجم السعر */
    color: #fff;
    margin: 0;
    padding: 8px 18px; /* زيادة حشوة المستطيل لتناسب الحجم الجديد */
    background: linear-gradient(45deg, #4682B4, #20B2AA);
    border-radius: 8px;
    font-weight: 600;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    text-align: center;
}

.result-card:hover p {
    transform: scale(1.05);
    box-shadow: 0 4px 10px rgba(70, 130, 180, 0.6);
}

/* Media Queries */
@media (max-width: 480px) { /* موبايل صغير */
    .result-card {
        padding: 15px;
        width: 95%;
        min-height: 180px; /* ارتفاع أدنى للموبايل */
    }

    .result-card img {
        width: clamp(70px, 18vw, 120px); /* حجم أكبر للموبايل */
        height: clamp(70px, 18vw, 120px);
        margin-bottom: 15px;
    }

    .result-card h4 {
        font-size: clamp(16px, 4.5vw, 22px); /* نص أكبر للموبايل */
        margin-bottom: 15px;
    }

    .result-card p {
        font-size: clamp(14px, 4vw, 20px); /* سعر أكبر للموبايل */
        padding: 6px 15px;
    }
}

@media (min-width: 481px) and (max-width: 768px) { /* تابلت */
    .result-card {
        width: 90%;
        min-height: 190px;
    }

    .result-card img {
        width: clamp(80px, 15vw, 130px);
        height: clamp(80px, 15vw, 130px);
    }

    .result-card h4 {
        font-size: clamp(18px, 4.5vw, 24px);
    }

    .result-card p {
        font-size: clamp(16px, 4vw, 22px);
    }
}

@media (min-width: 769px) { /* كمبيوتر */
    .result-card {
        width: 85%;
        max-width: 450px;
        min-height: 200px;
    }

    .result-card img {
        width: 120px; /* حجم ثابت للكمبيوتر */
        height: 120px;
    }

    .result-card h4 {
        font-size: 24px; /* نص أكبر للكمبيوتر */
    }

    .result-card p {
        font-size: 22px; /* سعر أكبر للكمبيوتر */
    }
}

.results-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: 600px;
    overflow-y: auto;
    scroll-behavior: smooth;
    border-radius: 10px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.2);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    transform: translateZ(0); /* تسريع عتادي */
}



/* تأثير ظهور تدريجي */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

     


@keyframes shake {
    0%, 100% {
        transform: translateX(0);
    }
    25% {
        transform: translateX(-10px);
    }
    50% {
        transform: translateX(10px);
    }
    75% {
        transform: translateX(-10px);
    }
}


.news-bar {
    display: flex;
    align-items: center;
    justify-content: row-reverse;
    background: rgba(0, 0, 0, 0.3);
    padding: 8px 16px;
    border-radius: 25px;
    width: 100%;
    height: 40px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    margin-bottom: 2px; /* تقليل المسافة السفلية من 8px إلى 4px */
    box-sizing: border-box;
}

/* زر "عاجل" في اليمين */
.breaking-news {
    background: linear-gradient(135deg, #0082B5, #0070A0);
    color: white;
    font-weight: bold;
    padding: 6px 14px;
    border-radius: 20px;
    text-align: center;
    font-size: 14px;
    box-shadow: 0px 0px 10px rgba(0, 130, 181, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    height: 28px;
    margin-left: auto;
    order: 2;
    /* animation: none; */ /* أو احذف السطر ده نهائي */
}

@keyframes pulse {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(1.1); opacity: 0.9; }
}

/* تحسين حاوية الأخبار لجعلها بدون لون إضافي */
.news-ticker-container {
    flex: 1;
    height: 28px;
    overflow: hidden;
    position: relative;
    display: flex;
    align-items: center;
    background: transparent !important; /* ✅ اجعل الخلفية شفافة */
    border-radius: 15px;
    padding: 4px 8px; /* ✅ ضبط الحواف لتكون متساوية */
}

/* تحسين شريط الأخبار ليكون متناسقًا بدون خلفية منفصلة */
.news-ticker {
    display: flex;
    align-items: center;
    white-space: nowrap;
    position: absolute;
    animation: scrollText 60s linear infinite;
    color: white;
    font-weight: bold;
    font-size: 14px;
    gap: 25px;
    direction: rtl;
    unicode-bidi: plaintext;
    background: transparent !important; /* ✅ إزالة لون الخلفية */
}


/* ضبط كل جزء من الخبر لمنع تغيير ترتيب النصوص المختلطة */
.news-ticker span {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-right: 20px;
    direction: rtl; /* ✅ التأكد أن النصوص المختلطة تبقى متناسقة */
    unicode-bidi: embed; /* ✅ يضمن بقاء النصوص الإنجليزية ضمن مكانها الصحيح */
}

    
/* تحسين مظهر الأيقونة مع النص */
.news-ticker img {
    width: 16px;
    height: 16px;
    flex-shrink: 0; /* ✅ منع الأيقونات من التمدد أو التقلص */
}

/* تحسين الروابط داخل الأخبار */
.news-ticker a {
    color: white !important;
    text-decoration: none !important;
    direction: rtl; /* ✅ إجبار النص على البقاء في الاتجاه الصحيح */
}
.news-ticker a:hover {
    text-decoration: underline;
}

@keyframes scrollText {
    from { transform: translateX(-100%); }
    to { transform: translateX(100%); }
}
        


swal2-popup {
    background: rgba(255, 255, 255, 0.1); /* لون شفاف */
    border-radius: 15px;
    color: #fff;
    text-align: center;
    backdrop-filter: blur(10px);
    width: 300px; /* تقليل حجم النافذة */
    padding: 20px;
    font-family: 'Cairo', sans-serif !important;
}

.swal2-title {
    color: white;
    font-size: 24px !important;
    font-weight: bold !important;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.7);
    margin-bottom: 15px;
}

.swal2-html-container {
    font-size: 16px !important;
    color: #dcdcdc !important;
    margin: 10px 0;
}

.swal2-actions {
    display: flex !important;
    flex-direction: row !important; /* جعل الأزرار جنب بعض */
    justify-content: center !important;
    gap: 10px !important; /* مسافة بين الأزرار */
    margin-top: 15px;
}


.swal2-confirm, .swal2-cancel {
    padding: 6px 16px !important; /* تقليل الحشوة لتصغير الأزرار */
    font-size: 14px !important; /* تقليل حجم النص */
    border-radius: 20px !important; /* زوايا مستديرة */
    font-weight: 600 !important;
    transition: all 0.3s ease !important;
    color: white !important;
    border: none !important;
    min-width: 60px !important; /* عرض أدنى للأزرار */
    overflow: hidden !important; /* قص التأثيرات */
    clip-path: inset(0 0 0 0 round 20px) !important; /* قص يطابق border-radius */
}

.swal2-confirm {
    background: linear-gradient(135deg, #43cea2, #185a9d) !important;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

.swal2-cancel {
    background: linear-gradient(135deg, #FF416C, #FF4B2B) !important;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

.swal2-confirm:hover, .swal2-cancel:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 16px rgba(255, 255, 255, 0.3);
}

.swal2-confirm:active, .swal2-cancel:active {
    transform: scale(0.95) !important;
    box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.5) !important; /* ظل داخلي فقط */
    clip-path: inset(0 0 0 0 round 20px) !important; /* قص صارم */
}


.swal2-input {
    width: 90%;
    padding: 12px 15px;
    font-size: 16px;
    color: #ffffff;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 10px;
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.5);
    outline: none;
    transition: all 0.3s ease;
    margin: 10px auto;
    display: block;
    font-family: 'Cairo', sans-serif !important;
}

.swal2-input:focus {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid #43cea2;
    box-shadow: 0 0 10px #43cea2;
}



/* تنسيق زر الرجوع لأعلى */
.scroll-to-top {
    position: fixed;
    bottom: 60px;
    right: 20px;
    background: linear-gradient(45deg, #8B0000, #DC143C);
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease, opacity 0.3s ease;
    opacity: 0;
    visibility: hidden;
    z-index: 1000;
    overflow: hidden !important; /* قص صارم */
    clip-path: circle(25px at center); /* قص دائري صارم */
}

.scroll-to-top:hover {
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

.scroll-to-top:active {
    transform: scale(0.9) !important; /* تصغير قوي */
    background: linear-gradient(45deg, #7A0000, #C01234) !important;
    box-shadow: none !important; /* إلغاء الظل الخارجي */
    box-shadow: inset 0 6px 12px rgba(0, 0, 0, 0.7) !important; /* ظل داخلي فقط */
    clip-path: circle(25px at center) !important; /* تأكيد القص الدائري */
}

/* إظهار الزر */
.show-scroll-btn {
    opacity: 1;
    visibility: visible;
}

footer p {
    margin: 0; /* إزالة الهوامش */
    padding: 3px 0; /* تصغير الحشوة العلوية والسفلية */
    font-size: 14px; /* تصغير حجم النص */
    color: white; /* تأكيد اللون الأبيض */
    text-align: center;
}





footer {
    background-color: rgba(0, 0, 0, 0.8); /* جعل الخلفية أكثر وضوحًا */
    color: white;
    text-align: center;
    padding: 10px 0; /* تقليل التباعد لجعله أنيقًا */
    width: 100%;
    font-family: 'Montserrat', sans-serif;
    font-size: 14px;
    box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.4); /* تحسين الظل لجعله أكثر بروزًا */
    position: fixed; /* تثبيت الفوتر أسفل الصفحة */
    bottom: 0; /* تثبيته في الأسفل */
    left: 0;
    z-index: 1000; /* جعله فوق جميع العناصر */
}

/* التأكد من عدم اختفاء المحتوى خلف الفوتر */
body {
    padding-bottom: 50px; /* يضمن عدم تغطية المحتوى بالفوتر */
}




    </style>
</head>
<body>
  

<button id="scrollToTopBtn" class="scroll-to-top"><i class="fas fa-arrow-up"></i></button>

<!-- دائرة عائمة للعناصر الجديدة -->
<div id="newItemsFloatingBtn" class="floating-new-btn">
    <span>جديد</span>
    <div class="new-items-count"></div>
</div>

<!-- النافذة المنبثقة للعناصر الجديدة -->
<div id="newItemsModal">
    <button class="close-modal-btn" onclick="closeNewItemsModal()"><i class="fas fa-times"></i></button>
    <h2>العناصر الجديدة</h2>
    <div class="modal-content"></div>
</div>
 
 
 <header class="header">
    <div class="header-title">مكتب عسل</div>
    <div class="header-buttons">
        <button class="header-btn refresh-btn" onclick="refreshData()" title="تحديث البيانات">تحديث</button>
        <button class="header-btn exit-btn" onclick="confirmExit()" title="خروج">خروج</button>
    </div>
</header>
 
 
 <!-- ✅ الطبقة الضبابية Overlay -->
<div id="overlay"></div>

<div id="promoPopup">
    <div class="promo-content">
        <img id="promoImage" src="images/logo.png" alt="Discount Offer">
        <h1 class="popup-title">🔥 عرض من مكتب عسل 🔥</h1>
        <p class="promo-text">
            الأسعار نزلناها الك،<br>
            الحك قبل ما يخلص العرض!
        </p>
        <button id="closeBtn" onclick="closePopup()">👌 شوف بنفسك</button>
    </div>
</div>

    <div class="container">
      
      
      
    <!-- شعار دائري -->
   <div class="notification-container">
    <div class="logo-container" id="logo"> 
     <img src="images/logo.png" alt="Logo">
    </div>
    <div class="notification" id="notification">
        <div class="notification-text" id="notification-text"></div>
    </div>
</div>
    


<!-- شريط الأخبار -->
<div class="news-bar">
    <div class="breaking-news">🔥 تقنيات</div>
    <div class="news-ticker-container">
        <div class="news-ticker" id="newsTicker">جاري تحميل الأخبار...</div>
    </div>
</div>


        

      <div class="categories">
    <!-- زر أسعار بنمط الكروب -->
     <button class="new-category-btn" onclick="openLCDPage()"><i class="fas fa-list"></i> أسعار بنمط الكروب</button>
          <button class="category-btn tools-btn" onclick="openToolsPage()"><i class="fas fa-shopping-cart"></i> متجر عسل </button>
      <button class="category-btn" onclick="window.location.href='similarites.html'"><i class="fas fa-sync"></i> توافقات قطع الغيار  </button>
           <div class="slider-container">
    <button class="slider-btn prev-btn"><i class="fas fa-chevron-left"></i></button>
    <div class="slider" id="slider">
        <div class="category" onclick="filterCategory('LCD')">
            <i class="fas fa-tv"></i>
            <span>شاشات</span>
        </div>
        <div class="category" onclick="filterCategory('BATTERY')">
            <i class="fas fa-battery-full"></i>
            <span>بطاريات</span>
        </div>
        <div class="category" onclick="filterCategory('HOUSING')">
            <i class="fas fa-mobile-alt"></i>
            <span>شواصي</span>
        </div>
        <div class="category" onclick="filterCategory('BACK')">
            <i class="fas fa-tablet-alt"></i>
            <span>اظهر</span>
        </div>
        <div class="category" onclick="filterCategory('CAMERA')">
            <i class="fas fa-camera"></i>
            <span>كاميرا</span>
        </div>
        <div class="category" onclick="filterCategory('CHARGING')">
            <i class="fas fa-plug"></i>
            <span>شحن</span>
        </div>
        <div class="category" onclick="filterCategory('BUZZER')">
            <i class="fas fa-bell"></i>
            <span>جرس</span>
        </div>
        <div class="category" onclick="filterCategory('HEADPHONE')">
            <i class="fas fa-volume-up"></i>
            <span>سماعة</span>
        </div>


        <div class="category" onclick="filterCategory('FINGER')">
    <i class="fas fa-fingerprint"></i>
    <span>بصمة</span>
</div>

    </div>
    <button class="slider-btn next-btn"><i class="fas fa-chevron-right"></i></button>
</div>

</div>

        <div class="search-container">
    <input type="text" id="searchInput" placeholder="Search for items...">
    <button id="clearBtn" class="clear-btn" onclick="clearSearch()" style="display: none;"><i class="fas fa-times"></i></button>
    <button id="searchBtn" onclick="searchItems()"><i class="fas fa-search"></i></button>
</div>


        <div id="results" class="results"></div>

</div>




<footer>
    <p>&copy; 2025 Assal Office. All rights reserved.</p>
</footer>



    <script>
      




// دالة للتحكم في ظهور/إخفاء زر المسح
function toggleClearButton() {
    const searchInput = document.getElementById("searchInput");
    const clearBtn = document.getElementById("clearBtn");
    
    if (searchInput.value.trim().length > 0) {
        clearBtn.style.display = "flex"; // إظهار الزر عند الكتابة
    } else {
        clearBtn.style.display = "none"; // إخفاء الزر إذا الحقل فارغ
    }
}

// دالة لمسح حقل البحث
function clearSearch() {
    const searchInput = document.getElementById("searchInput");
    const resultsContainer = document.getElementById("results");
    
    searchInput.value = ""; // تفريغ الحقل
    resultsContainer.style.display = "none"; // إخفاء النتائج
    toggleClearButton(); // تحديث حالة زر المسح
    toggleScrollToTopButton(); // تحديث زر الرجوع لأعلى
}

// ربط حدث الكتابة بحقل البحث
document.getElementById("searchInput").addEventListener("input", toggleClearButton);

// التأكد من حالة الزر عند تحميل الصفحة
document.addEventListener("DOMContentLoaded", toggleClearButton);
      

// جعل الدائرة قابلة للسحب
const floatingBtn = document.getElementById("newItemsFloatingBtn");
let isDragging = false;
let isDraggingInitiated = false; // متغير لتتبع ما إذا حدث سحب
let baseX, baseY; // الموقع الأساسي عند بدء السحب
let startX, startY;
const dragThreshold = 5; // عتبة الحركة (بالبكسل)
let touchStartTime; // لتتبع وقت بدء اللمس


// إعداد الموقع الأولي بناءً على `left` و`bottom`

floatingBtn.style.left = "20px";
floatingBtn.style.bottom = "50px";


// تحديث القيم الأولية بناءً على الموقع الفعلي
const updateInitialPosition = () => {
    const rect = floatingBtn.getBoundingClientRect();
    baseX = rect.left; // الموقع الأساسي في بداية السحب
    baseY = rect.top;
};


updateInitialPosition(); // تهيئة القيم عند التحميل

floatingBtn.addEventListener("mousedown", startDragging);
floatingBtn.addEventListener("touchstart", startDragging);

function startDragging(e) {
    e.preventDefault();
    isDragging = true;
    isDraggingInitiated = false;
    updateInitialPosition(); // إعادة تحديث القيم الأولية عند بدء السحب
    if (e.type === "touchstart") {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        touchStartTime = Date.now(); // تسجيل وقت بدء اللمس
    } else {
        startX = e.clientX;
        startY = e.clientY;
    }
    floatingBtn.style.cursor = "grabbing";
    floatingBtn.style.transition = "none"; // إزالة أي انتقال (transition) أثناء السحب
}

document.addEventListener("mousemove", drag);
document.addEventListener("touchmove", drag);

function drag(e) {
    if (isDragging) {
        e.preventDefault();
        let newX, newY;
        if (e.type === "touchmove") {
            newX = e.touches[0].clientX;
            newY = e.touches[0].clientY;
        } else {
            newX = e.clientX;
            newY = e.clientY;
        }

        const deltaX = Math.abs(newX - startX);
        const deltaY = Math.abs(newY - startY);
        if (deltaX > dragThreshold || deltaY > dragThreshold) {
            isDraggingInitiated = true;

            // حساب الموقع الجديد بناءً على الفرق النسبي من الموقع الأساسي
            const offsetX = newX - startX;
            const offsetY = newY - startY;
            let currentX = baseX + offsetX;
            let currentY = baseY + offsetY;

            const maxX = window.innerWidth - floatingBtn.offsetWidth;
            const maxY = window.innerHeight - floatingBtn.offsetHeight;
            currentX = Math.max(0, Math.min(currentX, maxX));
            currentY = Math.max(0, Math.min(currentY, maxY));

            floatingBtn.style.left = currentX + "px";
            floatingBtn.style.top = currentY + "px";
            floatingBtn.style.right = "auto";
            floatingBtn.style.bottom = "auto";
        }
    }
}

document.addEventListener("mouseup", stopDragging);
document.addEventListener("touchend", stopDragging);

function stopDragging(e) {
    if (isDragging) {
        isDragging = false;
        floatingBtn.style.cursor = "pointer";
        updateInitialPosition(); // تحديث الموقع الأساسي بعد انتهاء السحب

        // التحقق مما إذا كان النقر باللمس (tap) وليس سحب
        if (e.type === "touchend" && !isDraggingInitiated) {
            const touchEndTime = Date.now();
            const touchDuration = touchEndTime - touchStartTime;

            // إذا كانت مدة اللمس قصيرة (أقل من 300 مللي ثانية)، نعتبرها نقرة
            if (touchDuration < 300) {
                openModal();
            }
        }
    }
}

// متغير لتتبع حالة النافذة
let isModalOpen = false;

// فتح النافذة
function openModal() {
    try {
        if (isModalOpen) return; // إذا كانت النافذة مفتوحة، لا تفعل شيئًا

        const modal = document.getElementById("newItemsModal");
        if (modal.style.display === "none" || !modal.style.display) {
            modal.style.display = "flex";
            modal.style.animation = "slideDownModal 0.5s ease-out forwards";
            isModalOpen = true;
            loadNewItems();
        }
    } catch (error) {
        console.error("Error in openModal:", error);
    }
}

// إغلاق النافذة
function closeNewItemsModal() {
    try {
        const modal = document.getElementById("newItemsModal");
        modal.style.animation = "slideUpModal 0.5s ease-in forwards";
        setTimeout(() => {
            modal.style.display = "none";
            isModalOpen = false; // إعادة تعيين الحالة
        }, 500); // التأخير يساوي مدة الأنيميشن
    } catch (error) {
        console.error("Error in closeNewItemsModal:", error);
        isModalOpen = false; // إعادة تعيين الحالة في حالة حدوث خطأ
    }
}


// معالج النقر بالماوس
floatingBtn.addEventListener("click", (e) => {
    if (!isDraggingInitiated) {
        openModal();
    }
    isDraggingInitiated = false; // إعادة تعيين بعد النقر
});

      
 const notifications = [
    "شاشات KBS 👌 ضمان بعد الشد",
    "شاشات FLYCDI 🔥 ضمان بعد الشد",
    "تره أسعارنا الأرخص بالمحافظة 😉",
    "متانة وجودة ✨ وسعر يبرد الگلب",
    "مكتب عسل .. خبرة سنين بالقطع",
    "مو الوحيدين.. بس إحنا الأفضل 😎",
    "مكتب عسل اسم بالثقة والقطع",
    "شاشات قوية 💪 وياها ضمان كامل",
    "أرخص سعر 🔧 وأعلى جودة",
    "مكتب عسل الأول بالثقة 👍",
    "قطع غيار بأسعار خوش زباين",
    "خبرتنا كفيلة ترضيك دومًا ✨",
    "FLYCDI شاشات ما إلها مثيل 🔥",
    "مكتبنا عنوان التميّز بالمحافظة",
    "أسعار تخلي الكل راضي 😍",
    "KBS الشاشات الأقوى بالسوق",
    "الجودة موجودة .. والتكلفة قليلة 💰"
];


function triggerAnimation() {
    const logo = document.getElementById("logo");
    const notification = document.getElementById("notification");
    const notificationText = document.getElementById("notification-text");
    const resultsContainer = document.getElementById("results");
    const searchInput = document.getElementById("searchInput");

    // إذا كانت النتائج معروضة أو يوجد نص في حقل البحث، نؤخر الانفجار
    if (!logo || !notification || !notificationText || 
        resultsContainer.style.display === "flex" || 
        searchInput.value.trim().length > 0) {
        setTimeout(triggerAnimation, 100); // تأخير بسيط جدًا
        return;
    }

    // اهتزاز اللوغو
    logo.style.animation = "shake 0.5s ease-in-out";
    setTimeout(() => {
        logo.style.animation = "none";
    }, 500);

    // انفجار اللوغو واختفاءه
    setTimeout(() => {
        logo.style.animation = "explode 0.5s ease-out";
        logo.style.opacity = "0";
    }, 800);

    // عرض الإشعار
    setTimeout(() => {
        const randomNotification = notifications[Math.floor(Math.random() * notifications.length)];
        notificationText.textContent = randomNotification;
        notification.classList.add("show");
    }, 1300);

    // اختفاء الإشعار بانيميشن GSAP
    setTimeout(() => {
        notification.classList.remove("show");
        gsap.to(notification, {
            scale: 0.8,
            opacity: 0,
            rotation: 180,
            duration: 0.8,
            ease: "power2.inOut",
            onComplete: () => {
                notification.style.transform = "scale(0)";
            }
        });
    }, 5000);

    // إعادة اللوغو من جديد (بدون دوران - يظهر فجأة)
    setTimeout(() => {
        gsap.set(logo, { scale: 0, opacity: 0 }); // ماكو rotation
        gsap.to(logo, {
            scale: 1,
            opacity: 1,
            duration: 1.2,
            ease: "bounce.out"
        });
    }, 5800);

    setTimeout(triggerAnimation, 8000);
}

      
      
      
 let showPromoPopup = true; // 🔥 يتحكم فقط في النافذة المنبثقة، false = تعطيل النافذة
let promoAlreadyShown = sessionStorage.getItem('promoShown') === 'true';

window.onload = function() {
    const isActivated = localStorage.getItem('isActivated') === 'true';

    if (!isActivated) {
        showActivationPopup();
    } else {
        triggerAnimation();
        if (showPromoPopup && !promoAlreadyShown) {
            setTimeout(() => {
                let popup = document.getElementById('promoPopup');
                popup.style.display = 'flex';
                popup.style.animation = 'slideDown 0.6s ease-out forwards';
            }, 500);
            sessionStorage.setItem('promoShown', 'true');
        }
        loadExcelFiles().then(result => {
            if (result.success) {
                console.log("تم تحميل البيانات بنجاح، جارٍ تحميل العناصر الجديدة...");
                loadNewItems();
            } else {
                console.warn("فشل تحميل البيانات:", result.message);
            }
        });
    }
};


async function showActivationPopup() {
    const result = await Swal.fire({
        title: '📢 تنويه هام',
        html: `
            <p style="color: #dcdcdc; direction: rtl;">
                📢 تنويه لزبائن مكتب عسل<br>
                تم قفل التطبيق بالكامل، والتفعيل صار حصريًا من داخل مكاتبنا فقط.<br>
                ليش؟ حتى نضمنلكم خصوصية، وأسعار ما توصل لغير أهلها 😉
            </p>
        `,
        input: 'password',
        inputPlaceholder: 'أدخل كلمة المرور...',
        inputAttributes: {
            autocapitalize: 'off',
            autocorrect: 'off'
        },
        showCancelButton: true,
        confirmButtonText: 'تفعيل',
        cancelButtonText: 'إلغاء',
        backdrop: 'rgba(0, 0, 0, 0.8)',
        allowOutsideClick: false,
        allowEscapeKey: false,
        customClass: {
            popup: 'swal2-popup activation-popup',
            title: 'swal2-title',
            htmlContainer: 'swal2-html-container',
            input: 'swal2-input',
            confirmButton: 'swal2-confirm',
            cancelButton: 'swal2-cancel'
        },
        showClass: {
            popup: 'animate__animated animate__zoomIn'
        },
        hideClass: {
            popup: 'animate__animated animate__zoomOut'
        },
        didOpen: () => {
            document.querySelector('.swal2-popup').style.zIndex = '10000';
        }
    });

    if (result.isConfirmed) {
        const password = result.value;
        if (password === '112233') {
            localStorage.setItem('isActivated', 'true');
            Swal.fire({
                title: 'تم التفعيل!',
                html: '<p style="color: #dcdcdc;">تم تفعيل التطبيق بنجاح. مرحبًا بك!</p>',
                iconHtml: '<i class="fas fa-check-circle"></i>',
                confirmButtonText: 'موافق',
                backdrop: 'rgba(0, 0, 0, 0.8)',
                customClass: {
                    popup: 'swal2-popup',
                    title: 'swal2-title',
                    htmlContainer: 'swal2-html-container',
                    confirmButton: 'swal2-confirm'
                },
                didOpen: () => {
                    document.querySelector('.swal2-popup').style.zIndex = '10000';
                }
            }).then(() => {
                location.reload();
            });
        } else {
            Swal.fire({
                title: 'كلمة مرور خاطئة',
                html: '<p style="color: #ff4d4d;">يرجى إدخال كلمة المرور الصحيحة.</p>',
                iconHtml: '<i class="fas fa-exclamation-circle"></i>',
                confirmButtonText: 'حاول مجددًا',
                backdrop: 'rgba(0, 0, 0, 0.8)',
                customClass: {
                    popup: 'swal2-popup',
                    title: 'swal2-title',
                    htmlContainer: 'swal2-html-container',
                    confirmButton: 'swal2-confirm'
                },
                didOpen: () => {
                    document.querySelector('.swal2-popup').style.zIndex = '10000';
                }
            }).then(() => {
                showActivationPopup();
            });
        }
    } else {
        Swal.fire({
            title: 'تم الإلغاء',
            html: '<p style="color: #dcdcdc;">يجب تفعيل التطبيق للمتابعة.</p>',
            iconHtml: '<i class="fas fa-info-circle"></i>',
            confirmButtonText: 'حاول مجددًا',
            backdrop: 'rgba(0, 0, 0, 0.8)',
            customClass: {
                popup: 'swal2-popup',
                title: 'swal2-title',
                htmlContainer: 'swal2-html-container',
                confirmButton: 'swal2-confirm'
            },
            didOpen: () => {
                document.querySelector('.swal2-popup').style.zIndex = '10000';
            }
        }).then(() => {
            showActivationPopup();
        });
    }
}

// ✅ حركة الخروج بنفس مسار النزول (لأعلى)
function closePopup() {
    let popup = document.getElementById('promoPopup');
    popup.style.animation = 'slideUp 0.6s ease-in forwards';

    setTimeout(() => {
        popup.style.display = 'none';
        document.getElementById('overlay').style.display = 'none';
    }, 600); // ⏳ وقت متزامن مع الأنيميشن لضمان خروج سلس
}

const slider = document.getElementById('slider');
const prevBtn = document.querySelector('.prev-btn');
const nextBtn = document.querySelector('.next-btn');

prevBtn.addEventListener('click', () => {
    slider.scrollBy({ left: -100, behavior: 'smooth' });
});

nextBtn.addEventListener('click', () => {
    slider.scrollBy({ left: 100, behavior: 'smooth' });
});

function filterCategory(category) {
    alert("تم اختيار: " + category);
}

        
        const dropboxMainFile = "https://assap-app-project.ahmed-al-bayatii-90.workers.dev/file1" + "?t=" + new Date().getTime();
        let database = {};
        let currentCategory = null;

async function loadExcelFiles() {
    try {
        if (!dropboxMainFile) {
            console.error("رابط ملف Excel غير معرف.");
            Swal.fire({
                title: 'خطأ',
                html: '<p style="color: #ff4d4d;">رابط ملف Excel غير معرف. يرجى التحقق من الاتصال.</p>',
                iconHtml: '<i class="fas fa-exclamation-circle"></i>',
                confirmButtonText: 'موافق',
                customClass: {
                    popup: 'swal2-popup',
                    title: 'swal2-title',
                    htmlContainer: 'swal2-html-container',
                    confirmButton: 'swal2-confirm'
                }
            });
            return { success: true, hasData: false, message: "رابط ملف Excel غير معرف." };
        }

        console.log("جارٍ تحميل ملف Excel من:", dropboxMainFile);
        const mainResponse = await fetch(dropboxMainFile, { cache: 'no-store' });
        if (!mainResponse.ok) {
            console.error(`فشل تحميل ملف Excel: ${mainResponse.status} ${mainResponse.statusText}`);
            Swal.fire({
                title: 'خطأ في التحميل',
                html: `<p style="color: #ff4d4d;">فشل تحميل البيانات: ${mainResponse.status} - ${mainResponse.statusText}</p>`,
                iconHtml: '<i class="fas fa-exclamation-circle"></i>',
                confirmButtonText: 'موافق',
                customClass: {
                    popup: 'swal2-popup',
                    title: 'swal2-title',
                    htmlContainer: 'swal2-html-container',
                    confirmButton: 'swal2-confirm'
                }
            });
            return { success: true, hasData: false, message: `فشل تحميل ملف Excel: ${mainResponse.status}` };
        }

        const mainBuffer = await mainResponse.arrayBuffer();
        const mainWorkbook = XLSX.read(mainBuffer, { type: "array" });

        // تهيئة الكائن database
        database = {
            LCD: [],
            HUAWEI: [],
            BATTERY: [],
            HOUSING: [],
            BACK: [],
            CAMERA: [],
            CHARGING: [],
            BUZZER: [],
            HEADPHONE: [],
            FINGER: []
        };

        // تحميل البيانات من كل ورقة
        database.LCD = XLSX.utils.sheet_to_json(mainWorkbook.Sheets["LCD"] || {}, { defval: null });
        database.HUAWEI = XLSX.utils.sheet_to_json(mainWorkbook.Sheets["HUAWEI"] || {}, { defval: null });
        database.BATTERY = XLSX.utils.sheet_to_json(mainWorkbook.Sheets["BATTERY"] || {}, { defval: null });
        database.HOUSING = XLSX.utils.sheet_to_json(mainWorkbook.Sheets["HOUSING"] || {}, { defval: null });
        database.BACK = XLSX.utils.sheet_to_json(mainWorkbook.Sheets["BACK"] || {}, { defval: null });
        database.CAMERA = XLSX.utils.sheet_to_json(mainWorkbook.Sheets["CAMERA"] || {}, { defval: null });
        database.CHARGING = XLSX.utils.sheet_to_json(mainWorkbook.Sheets["CHARGING"] || {}, { defval: null });
        database.BUZZER = XLSX.utils.sheet_to_json(mainWorkbook.Sheets["BUZZER"] || {}, { defval: null });
        database.HEADPHONE = XLSX.utils.sheet_to_json(mainWorkbook.Sheets["HEADPHONE"] || {}, { defval: null });
        database.FINGER = XLSX.utils.sheet_to_json(mainWorkbook.Sheets["FINGER"] || {}, { defval: null });

        // تصحيح البيانات
        Object.keys(database).forEach(category => {
            console.log(`فئة ${category}: ${database[category].length} عنصر`, database[category]);
            if (database[category].length === 0) {
                console.warn(`لا توجد بيانات في ورقة ${category}`);
            } else {
                database[category].slice(0, 5).forEach(item => {
                    console.log(`عنصر في ${category}:`, {
                        name: item["Item Name"] || item["Item"],
                        price: item["Price"],
                        new: item["New"],
                        newType: typeof item["New"],
                        isNewEmpty: item["New"] === "" || item["New"] === undefined || item["New"] === null
                    });
                });
            }
        });

        const hasData = Object.values(database).some(items => items.length > 0);
        if (!hasData) {
            console.warn("ملف Excel لا يحتوي على بيانات صالحة (جميع الفئات فارغة).");
            Swal.fire({
                title: 'خطأ',
                html: '<p style="color: #ff4d4d;">ملف Excel لا يحتوي على بيانات صالحة.</p>',
                iconHtml: '<i class="fas fa-exclamation-circle"></i>',
                confirmButtonText: 'موافق',
                customClass: {
                    popup: 'swal2-popup',
                    title: 'swal2-title',
                    htmlContainer: 'swal2-html-container',
                    confirmButton: 'swal2-confirm'
                }
            });
            return { success: true, hasData: false, message: "ملف Excel لا يحتوي على بيانات صالحة." };
        }

        return { success: true, hasData: true };
    } catch (error) {
        console.error("خطأ في تحميل ملف Excel:", error.message, error.stack);
        Swal.fire({
            title: 'خطأ',
            html: `<p style="color: #ff4d4d;">حدث خطأ أثناء تحميل البيانات: ${error.message}</p>`,
            iconHtml: '<i class="fas fa-exclamation-circle"></i>',
            confirmButtonText: 'موافق',
            customClass: {
                popup: 'swal2-popup',
                title: 'swal2-title',
                htmlContainer: 'swal2-html-container',
                confirmButton: 'swal2-confirm'
            }
        });
        return { success: true, hasData: false, message: error.message };
    }
}



async function loadNewItems() {
    const modal = document.getElementById("newItemsModal");
    const modalContent = modal.querySelector(".modal-content");
    const newItemsCount = document.querySelector(".new-items-count");

    modalContent.innerHTML = "";
    const categories = ["LCD", "HUAWEI", "BATTERY", "HOUSING", "BACK", "CAMERA", "CHARGING", "BUZZER", "HEADPHONE", "FINGER"];
    let newItems = [];

    categories.forEach(category => {
        if (database[category]) {
            const items = database[category].filter(item => {
                const newField = item["New"] !== undefined ? item["New"] : 
                                item["new"] !== undefined ? item["new"] : 
                                item["NEW"] !== undefined ? item["NEW"] : null;
                const isNew = newField === "" || newField === undefined || newField === null || newField === " " || newField === "  ";
                const priceValue = item["Price"] ? String(item["Price"]).trim() : "";
                const hasPrice = priceValue && !isNaN(parseFloat(priceValue)) && !["❎", "xx"].includes(priceValue);
                return hasPrice && isNew;
            });
            items.forEach(item => newItems.push({ ...item, category }));
        }
    });

    console.log(`إجمالي العناصر الجديدة: ${newItems.length}`, newItems);
    newItemsCount.textContent = newItems.length;

    if (newItems.length === 0) {
        modalContent.innerHTML = `
            <p style="color: #fff; font-family: 'Cairo', sans-serif; text-align: center;">
                لا توجد عناصر جديدة حاليًا
            </p>
        `;
        return;
    }

    newItems.forEach(item => {
        const card = document.createElement("div");
        card.className = "new-item-card";
        const iconClass = getIconForCategory(item.category);
        card.innerHTML = `
            <div class="category-circle">${item.category}</div>
            <div class="item-details">
                <div class="new-badge">جديد</div>
                <h4><i class="${iconClass}"></i> ${item["Item Name"] || item["Item"]}</h4>
                <p>${item["Price"].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} د.ع</p>
            </div>
        `;
        modalContent.appendChild(card);
    });
}

// دالة لاختيار الأيقونة بناءً على الفئة
function getIconForCategory(category) {
    const icons = {
        "LCD": "fas fa-tv",
        "HUAWEI": "fas fa-mobile-alt",
        "BATTERY": "fas fa-battery-full",
        "HOUSING": "fas fa-mobile-alt",
        "BACK": "fas fa-tablet-alt",
        "CAMERA": "fas fa-camera",
        "CHARGING": "fas fa-plug",
        "BUZZER": "fas fa-bell",
        "HEADPHONE": "fas fa-volume-up",
        "FINGER": "fas fa-fingerprint",
        "UNKNOWN": "fas fa-question-circle"
    };
    return icons[category] || icons["UNKNOWN"];
}



        
        
        document.getElementById("searchInput").addEventListener("keydown", function(event) {
    if (event.key === "Enter") {
        event.preventDefault(); // 🔴 منع إعادة تحميل الصفحة
        searchItems(); // ✅ استدعاء البحث
    }
});




        
function filterCategory(category) {
    currentCategory = category;

    // إزالة الفئة "active" من جميع العناصر في القائمة السلايد
    document.querySelectorAll(".category").forEach(cat => cat.classList.remove("active"));

    // إضافة الفئة "active" للعنصر المختار
    const selectedCategory = document.querySelector(`.category[onclick="filterCategory('${category}')"]`);
    if (selectedCategory) {
        selectedCategory.classList.add("active");
    }
}





        function normalizeString(str) {
            return str.replace(/\s+/g, '').toLowerCase();
        }

        
function displayResults(results) {
    const resultsContainer = document.getElementById("results");
    resultsContainer.innerHTML = '';

    if (results.length === 0) {
        resultsContainer.innerHTML = `
            <div class="no-results">
                هذا العنصر غير متوفر في الوقت الحالي
            </div>
        `;
    } else {
        let htmlContent = '';
        results.forEach(item => {
            const imgSrc = currentCategory === "SIMILARITES" 
                ? 'images/default.png'
                : `images/${currentCategory.toLowerCase()}.png`;

            htmlContent += `
                <div class="result-card">
                    <img src="${imgSrc}" alt="Item Image">
                    <h4>${item["Item Name"] || item["Item"]}</h4>
                    ${item["Price"] ? `<p>${item["Price"].toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} د.ع</p>` : '<p>غير متوفر</p>'}
                </div>
            `;
        });
        resultsContainer.innerHTML = htmlContent;
    }

    requestAnimationFrame(() => {
        resultsContainer.style.display = "flex";
        resultsContainer.scrollIntoView({ behavior: "smooth", block: "start" });
        toggleScrollToTopButton();
    });
}

// إخفاء الحاوية عند تفريغ حقل البحث
function searchItems() {
    const searchInput = document.getElementById("searchInput").value.trim();
    const resultsContainer = document.getElementById("results");

    if (!searchInput) {
        resultsContainer.style.display = 'none';
        Swal.fire({
            title: 'حقل فارغ',
            html: '<p style="color: #dcdcdc;">يرجى كتابة اسم العنصر قبل المتابعة</p>',
            iconHtml: '<i class="fas fa-exclamation-circle"></i>',
            confirmButtonText: 'موافق',
            customClass: {
                popup: 'swal2-popup',
                title: 'swal2-title',
                htmlContainer: 'swal2-html-container',
                confirmButton: 'swal2-confirm'
            }
        });
        return;
    }

    if (!currentCategory) {
        resultsContainer.style.display = 'none';
        Swal.fire({
            title: 'الصنف غير محدد',
            text: 'يرجى اختيار صنف من القائمة قبل البدء في البحث.',
            iconHtml: '<i class="fas fa-info-circle"></i>',
            confirmButtonText: 'موافق',
            customClass: {
                popup: 'swal2-popup',
                title: 'swal2-title',
                htmlContainer: 'swal2-html-container',
                confirmButton: 'swal2-confirm'
            }
        });
        return;
    }

    if (!database || !database[currentCategory] || database[currentCategory].length === 0) {
        resultsContainer.style.display = 'none';
        Swal.fire({
            title: 'لا توجد بيانات',
            html: `<p style="color: #ff4d4d;">لا توجد بيانات متاحة لفئة ${currentCategory}. يرجى تحديث الصفحة أو التحقق من الاتصال.</p>`,
            iconHtml: '<i class="fas fa-exclamation-circle"></i>',
            confirmButtonText: 'موافق',
            customClass: {
                popup: 'swal2-popup',
                title: 'swal2-title',
                htmlContainer: 'swal2-html-container',
                confirmButton: 'swal2-confirm'
            }
        });
        return;
    }

    const query = normalizeString(searchInput);
    const results = database[currentCategory]?.filter(item => {
        const itemName = item["Item Name"] || item["Item"];
        if (!itemName) {
            console.warn(`عنصر بدون اسم في فئة ${currentCategory}:`, item);
            return false;
        }
        return normalizeString(itemName).includes(query);
    }) || [];

    if (results.length === 0) {
        console.log(`لا توجد نتائج مطابقة في فئة ${currentCategory} للبحث: ${query}`);
    } else {
        console.log(`تم العثور على ${results.length} نتيجة في فئة ${currentCategory}:`, results);
    }

    displayResults(results);
}


// دالة الرجوع لأعلى الصفحة
function scrollToTop() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth' // تمرير سلس
    });
}

// التحكم بظهور الزر بناءً على التمرير وعدد النتائج
function toggleScrollToTopButton() {
    const scrollBtn = document.getElementById("scrollToTopBtn");
    const scrollPosition = window.scrollY; // موقع التمرير الحالي
    const results = document.getElementById("results");
    const resultCount = results.children.length; // عدد النتائج

    // الشرط: يظهر الزر إذا كانت هناك نتائج (حتى لو واحدة) وتم التمرير لأسفل أكثر من 100 بكسل
    if (resultCount > 0 && scrollPosition > 100) {
        scrollBtn.classList.add("show-scroll-btn");
    } else {
        scrollBtn.classList.remove("show-scroll-btn");
    }
}


// ربط الزر بالنقر
document.getElementById("scrollToTopBtn").addEventListener("click", scrollToTop);

// الاستماع لحدث التمرير
window.addEventListener("scroll", toggleScrollToTopButton);

// تحديث حالة الزر عند التحميل الأولي
document.addEventListener("DOMContentLoaded", toggleScrollToTopButton);

async function confirmExit() {
    const result = await Swal.fire({
        title: 'تأكيد الخروج',
        html: '<p style="color: #dcdcdc;">هل أنت متأكد أنك تريد الخروج؟</p>',
        iconHtml: '<i class="fas fa-sign-out-alt"></i>',
        showCancelButton: true,
        confirmButtonText: 'نعم', // نص مختصر
        cancelButtonText: 'لا', // نص مختصر
        backdrop: false, // تثبيت الواجهة
        customClass: {
            popup: 'swal2-popup',
            title: 'swal2-title',
            htmlContainer: 'swal2-html-container',
            confirmButton: 'swal2-confirm',
            cancelButton: 'swal2-cancel'
        },
        showClass: {
            popup: 'animate__animated animate__fadeInDown'
        },
        hideClass: {
            popup: 'animate__animated animate__fadeOutUp'
        }
    });

    if (result.isConfirmed) {
        // إغلاق التطبيق
        window.close();
    }
}


function openToolsPage() {
    window.location.href = 'tools.html'; // استبدل 'tools.html' بالرابط إلى الصفحة الجديدة
}


 // دالة لتحويل المستخدم إلى صفحة lcd.html
        function openLCDPage() {
            window.location.href = 'lcd.html';
        }



async function refreshData() {
    Swal.fire({
        html: `
            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                <div class="loading-circle" style="
                    width: 80px;
                    height: 80px;
                    border: 8px solid rgba(255, 255, 255, 0.2);
                    border-top: 8px solid #43cea2;
                    border-radius: 50%;
                    animation: spin 1s linear infinite;">
                </div>
                <p style="margin-top: 20px; font-size: 18px; color: #dcdcdc;">جارِ التحديث... يرجى الانتظار</p>
            </div>
        `,
        showConfirmButton: false,
        allowOutsideClick: false,
        backdrop: false,
        customClass: {
            popup: 'swal2-popup animate__animated animate__fadeInDown',
        },
    });

    const loadingPromise = new Promise(resolve => setTimeout(resolve, 3000));
    const loadFilesPromise = loadExcelFiles();

    const [_, loadResult] = await Promise.all([loadingPromise, loadFilesPromise]);

    if (!loadResult.hasData) {
        console.warn("لا توجد بيانات:", loadResult.message);
    }

    await loadNewItems();

    Swal.close(); // نغلق نافذة التحميل

    Swal.fire({
        title: 'تم التحديث بنجاح!',
        html: '<p style="color: #dcdcdc;">تم تحديث البيانات بنجاح. يمكنك المتابعة الآن.</p>',
        iconHtml: '<i class="fas fa-check-circle" style="font-size: 50px; color: #43cea2;"></i>',
        showConfirmButton: false, // إزالة زر "موافق"
        timer: 1500, // اختفاء تلقائي بعد 1.5 ثانية
        backdrop: false,
        allowOutsideClick: true,
        customClass: {
            popup: 'swal2-popup animate__animated animate__fadeInDown',
            title: 'swal2-title',
            htmlContainer: 'swal2-html-container',
        },
    }).then(() => {
        sessionStorage.setItem('hasUpdated', true);
        console.log('Data updated and session state saved successfully.');
        setTimeout(() => {
            location.reload();
        }, 1000);
    });
}
        
        loadExcelFiles();

 let newsInterval = null;

async function fetchTechNews() {
    const rssToJsonUrl = "https://api.rss2json.com/v1/api.json?rss_url=https://aitnews.com/feed/";
    const resultsContainer = document.getElementById("results");

    // إذا النتائج معروضة، لا تحدث الأخبار
    if (resultsContainer.style.display === "flex") {
        return;
    }

    try {
        const response = await fetch(rssToJsonUrl);
        const data = await response.json();
        let newsItems = [];

        if (data.items) {
            data.items.forEach(item => {
                let title = item.title;
                let link = item.link;
                let icon = "https://cdn-icons-png.flaticon.com/16/1041/1041916.png";
                newsItems.push(`<span><img src="${icon}" alt="📢"><a href="${link}" target="_blank">${title}</a></span>`);
            });
        }

        if (newsItems.length > 0) {
            document.getElementById("newsTicker").innerHTML = newsItems.join(" | ");
        } else {
            document.getElementById("newsTicker").textContent = "⚠️ لا توجد أخبار متاحة الآن";
        }
    } catch (error) {
        console.error("Error fetching news:", error);
        document.getElementById("newsTicker").textContent = "⚠️ تعذر تحميل الأخبار";
    }
}

function restartNewsTicker() {
    const ticker = document.querySelector(".news-ticker");
    const resultsContainer = document.getElementById("results");

    if (ticker && resultsContainer.style.display !== "flex") { // فقط إذا النتائج مو معروضة
        ticker.style.animation = "none";
        void ticker.offsetWidth;
        ticker.style.animation = "scrollText 60s linear infinite";
    }
}

function refreshNewsTicker() {
    const resultsContainer = document.getElementById("results");

    if (resultsContainer.style.display !== "flex") { // فقط إذا النتائج مو معروضة
        fetchTechNews(); // جلب الأخبار
        restartNewsTicker(); // إعادة تشغيل الحركة
    }
}

// دوال التحكم بالتحديث
function startNewsUpdates() {
    if (!newsInterval) {
        newsInterval = setInterval(fetchTechNews, 60000); // تحديث كل دقيقة
    }
}

function stopNewsUpdates() {
    if (newsInterval) {
        clearInterval(newsInterval);
        newsInterval = null;
    }
}

// التشغيل الأولي والتحكم
fetchTechNews(); // تحميل أولي
startNewsUpdates();

// ربط التحكم مع عرض النتائج
document.getElementById("results").addEventListener("transitionend", () => {
    if (document.getElementById("results").style.display === "flex") {
        stopNewsUpdates();
    } else {
        startNewsUpdates();
    }
});

// التعامل مع الأحداث الأخرى
document.addEventListener("click", function(event) {
    if (event.target.closest(".swal2-popup") || event.target.classList.contains("swal2-close") || 
        event.target.classList.contains("swal2-confirm") || event.target.classList.contains("swal2-cancel")) {
        setTimeout(refreshNewsTicker, 500); // تحديث الأخبار بعد إغلاق النافذة
    }
});

window.addEventListener("pageshow", function() {
    refreshNewsTicker(); // إعادة تشغيل الأخبار بعد العودة
});

window.addEventListener("load", function() {
    refreshNewsTicker(); // إعادة تشغيل الأخبار عند التحميل
});

        
    </script>
    <style>
    
    
        .swal2-popup {
            background: rgba(255, 255, 255, 0.1); /* لون شفاف */
            border-radius: 15px;
            color: #fff;
            text-align: center;
            backdrop-filter: blur(10px);
            width: 300px; /* تقليل حجم النافذة */
        }
        .swal2-title {
            color: white;
            text-shadow: 0 4 
            
      
